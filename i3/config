# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# Instead of duplicating the colors use those defined in the ~/.Xresources
set_from_resource $term_background  background
set_from_resource $term_foreground  foreground
set_from_resource $term_inactive    textinactive
set_from_resource $term_urgent      urgent
set_from_resource $term_active      textactive
set_from_resource $term_color0      color0
set_from_resource $term_color1      color1
set_from_resource $term_color2      color2
set_from_resource $term_color3      color3
set_from_resource $term_color4      color4
set_from_resource $term_color5      color5
set_from_resource $term_color6      color6
set_from_resource $term_color7      color7
set_from_resource $term_color8      color8
set_from_resource $term_color9      color9
set_from_resource $term_color10     color10
set_from_resource $term_color11     color11
set_from_resource $term_color12     color12
set_from_resource $term_color13     color13
set_from_resource $term_color14     color14
set_from_resource $term_color15     color15

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $dev    "[D]ev"
set $msg    "[M]essaging"
set $web    "[W]eb"
set $passwd "[P]wd"
set $files  "[F]iles"
set $term   "[T]erminal"
set $extra  "e[X]tra"

set $browser "firefox"

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
#font xft:URWGothic-Book 12

# This font is widely installed, provides lots of unicode glyphs, right-to-left
#font pango:monospace 8
font pango:DejaVu Sans Mono 10

# text rendering and scalability on retina/hidpi displays (thanks to pango).

# Hide borders
hide_edge_borders smart

# Remove title bars
#default_border pixel 1
#default_floating_border pixel 1

# Configure border style <normal|1pixel|pixel xx|none|pix    el>
new_window pixel 2
new_float normal

# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart
exec --no-startup-id dex-autostart --autostart --environment i3

# The combination of xss-lock, nm-applet and pactl is a popular choice, so
# they are included here as an example. Modify as you see fit.

# xss-lock grabs a logind suspend inhibit lock and will use i3lock to lock the
# screen before suspend. Use loginctl lock-session to lock your screen.
#exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3exit lock

# NetworkManager is the most popular way to manage wireless networks on Linux,
# and nm-applet is a desktop environment-independent system tray GUI for it.
exec --no-startup-id nm-applet

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal

# kill focused window
bindsym $mod+q kill

# start dmenu (a program launcher)
bindsym $mod+Escape exec --no-startup-id "dmenu_run -i -nf '$term_color15' -nb '$term_background' -sb '$term_background' -sf '$term_color4' -fn 'DejaVu Sans Mono:pixelsize=12'"

# A more modern dmenu replacement is rofi:
# bindcode $mod+40 exec "rofi -modi drun,run -show drun"
# There also is i3-dmenu-desktop which only displays applications shipping a
# .desktop file. It is a wrapper around dmenu, so you need that installed.
# bindcode $mod+40 exec --no-startup-id i3-dmenu-desktop

# Move between workspaces
bindsym $mod+Ctrl+Left workspace prev
bindsym $mod+Ctrl+Right workspace next

# change focus
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# enter fullscreen mode for the focused container
bindsym $mod+Ctrl+f fullscreen toggle

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# switch to workspace
bindsym $mod+d workspace $dev
bindsym $mod+m workspace $msg
bindsym $mod+w workspace $web
bindsym $mod+p workspace $passwd
bindsym $mod+x workspace $extra
bindsym $mod+t workspace $term
bindsym $mod+f workspace $files

# move focused container to workspace
bindsym $mod+Shift+d move container to workspace $dev
bindsym $mod+Shift+m move container to workspace $msg
bindsym $mod+Shift+w move container to workspace $web
bindsym $mod+Shift+p move container to workspace $passwd
bindsym $mod+Shift+x move container to workspace $extra
bindsym $mod+Shift+t move container to workspace $term
bindsym $mod+Shift+f move container to workspace $files

# Toggle bar
bindsym $mod+Shift+h bar mode toggle, exec notify-send 'Toggled bar'

# Lock Screen 
bindsym $mod+Shift+l exec --no-startup-id lock-monitor

# Keyboard
#bindsym $mod+Ctrl+Shift+d exec "i3-keyboard-layout set de; exec notify-send 'keyboard layout DE'"
#bindsym $mod+Ctrl+Shift+i exec "i3-keyboard-layout set it; exec notify-send 'keyboard layout IT'"
#bindsym $mod+Ctrl+Shift+t exec "i3-keyboard-layout cycle de it; exec notify-send 'keyboard toggled'"

# Favourite Programs
bindsym $mod+Ctrl+w exec $browser, exec notify-send 'Opening Browser'
bindsym $mod+Ctrl+i exec intellij-idea, exec notify-send 'Opening Intellij'
bindsym $mod+Ctrl+e exec pcmanfm, exec notify-send 'Opening File Manager'
#bindsym $mod+Ctrl+m exec webex-bin, exec notify-send 'Opening Webex'
bindsym $mod+Ctrl+m exec chromium-browser, exec notify-send 'Opening MS Team'
#bindsym $mod+Ctrl+Shift+m exec pkill CiscoCollabHost, exec notify-send 'Closing Webex'
bindsym $mod+Ctrl+Shift+m exec pkill chromium-browser, exec notify-send 'Closing MS Team'

# openconnect client
bindsym $mod+Ctrl+o exec firefox, exec notify-send 'Opening Browser'
bindsym $mod+Ctrl+p exec keepassxc, exec notify-send 'Opening Password Manager'

# Manage i3 configuration
bindsym $mod+3 mode "$mode_i3cfg"
set $mode_i3cfg (r)eload, r(e)start, (f)ix background, e(x)it
mode "$mode_i3cfg" {
        # reload the configuration file
        bindsym r reload
        # restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
        bindsym e restart
        bindsym f exec set-wallpaper

        # exit i3 (logs you out of your X session)
        bindsym x exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"

        # back to normal: Enter or Escape or $mod+3
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+3 mode "default"
}

# Change volume
bindsym $mod+v mode "$mode_volume"
set $mode_volume Volume (u)p 10%, (d)own 10%, (m)ute, m(i)c mute
mode "$mode_volume" {
        bindsym u exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
        bindsym d exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
        bindsym m exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
        bindsym i exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

        # back to normal: Enter or Escape or $mod+a
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+a mode "default"
}

# Manage power saving options
bindsym $mod+s mode "$mode_xset"
set $mode_xset DPMS (d)isable, (e)nable
mode "$mode_xset" {
        bindsym d exec xset s off -dpms, exec notify-send 'Disabled DPMS' 
        bindsym e exec xset s 600 600 +dpms, exec notify-send 'Enabled DPMS'

        # back to normal: Enter or Escape or $mod+1
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+1 mode "default"
}

# Change windows layout
bindsym $mod+l mode "$mode_layout"
set $mode_layout (s)tacking, (t)abbed, toggl(e) split
# Windows Layout
mode "$mode_layout" {
        # change container layout (stacked, tabbed, toggle split)
        bindsym s layout stacking
        bindsym t layout tabbed
        bindsym e layout toggle split
        
        # back to normal: Enter or Escape or $mod+3
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+l mode "default"
}

# Resize Window
mode "resize" {
        bindsym Left resize shrink width 2 px or 2 ppt
        bindsym Down resize grow height 2 px or 2 ppt
        bindsym Up resize shrink height 2 px or 2 ppt
        bindsym Right resize grow width 2 px or 2 ppt

        # back to normal: Enter or Escape or $mod+r
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}
bindsym $mod+r mode "resize"

# Screenshot
bindsym $mod+Print mode "$mode_screenshot"
set $mode_screenshot (f)ull desktop, (w)indow, (s)election
mode "$mode_screenshot" {
        bindsym f exec --no-startup-id cd ~/Pictures/screenshot && scrot '%Y-%m-%d_$wx$h_full.png'; exec notify-send 'Fullscreen screenshot taken'
        bindsym w --release exec --no-startup-id cd ~/Pictures/screenshot && scrot -u '%Y-%m-%d-%S_$wx$h_window.png'; exec notify-send 'Current selected windows screenshot taken'
        bindsym s --release exec --no-startup-id cd ~/Pictures/screenshot && scrot -s '%Y-%m-%d-%S_$wx$h_selection.png'; exec notify-send 'Selected screenshot taken'

        # back to normal: Enter or Escape or $mod+Print
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+Print mode "default"
}

# Set monitor output
bindsym $mod+o mode "$mode_output"
set $mode_output (n)otebook, (h)ome only, (b)oth home, (t)oggle screen
mode "$mode_output" {
        bindsym n exec --no-startup-id activate-specific-monitor notebook-monitor
        bindsym h exec --no-startup-id activate-specific-monitor external-home-monitor
        bindsym b exec --no-startup-id activate-specific-monitor both-home-monitors
        bindsym t exec --no-startup-id toggle-select-monitor

        # back to normal: Enter or Escape or $mod+o
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+o mode "default"
}

# Set shut down, restart and locking features
bindsym $mod+F4 mode "$mode_system"
bindsym $mod+4 mode "$mode_system"
set $mode_system (l)ock, (e)xit, switch_(u)ser, (s)uspend, (r)eboot, (Shift+s)hutdown
mode "$mode_system" {
        bindsym l exec --no-startup-id lock-monitor, mode "default"
        bindsym s exec --no-startup-id suspend-laptop, mode "default"
        bindsym u exec --no-startup-id i3exit switch_user, mode "default"
        bindsym e exec --no-startup-id i3exit logout, mode "default"
        bindsym r exec --no-startup-id i3exit reboot, mode "default"
        bindsym Shift+s exec --no-startup-id i3exit shutdown, mode "default"

        # back to normal: Enter or Escape or $mod+F4
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+F4 mode "default"
}

# Set windows orientation
bindsym $mod+k mode "$mode_orientation"
set $mode_orientation (h)orizontal, (v)ertical
mode "$mode_orientation" {
    # split in horizontal orientation
    bindsym h split h, exec notify-send 'Tile Horizontally'
    # split in vertical orientation
    bindsym v split v, exec notify-send 'Tile Vertically'

    # back to normal: Enter or Escape or $mod+v
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $mod+s mode "default"
}

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
   strip_workspace_numbers yes
   separator_symbol "|"
   
   colors {
     separator  $term_color5
     background $term_background
     statusline $term_color8

     #                  border           background          text
     focused_workspace  $term_background $term_background    $term_color4
     active_workspace   $term_background $term_background    $term_active
     inactive_workspace $term_background $term_background    $term_color8
     urgent_workspace   $term_background $term_background    $term_color5
     binding_mode       $term_background $term_color4        $term_background
  }

  status_command py3status
}

# Theme colors
# class                 border  bground text    indicator child_border
client.focused          $term_background $term_background $term_color4  $term_color4       $term_color4
client.focused_inactive $term_background $term_background $term_color4  $term_background   $term_background
client.unfocused        $term_background $term_background $term_color0  $term_background   $term_background
client.urgent           $term_background $term_background $etrm_urgent  $term_background   $term_background
client.placeholder      $term_background $term_background $term_color15 $term_background   $term_background

client.background       $term_background

# Default Application Workspaces
for_window [class="(?i)keepassxc"] move container to workspace $passwd
for_window [class="(?i)jetbrains-idea"] move container to workspace $dev
for_window [class="(?i)firefox-esr"] move container to workspace $web

# Default Startup Application
exec --no-startup-id ~/.fehbg
exec --no-startup-id xdg-user-dirs-update
exec --no-startup-id xset s off -dpms
exec --no-startup-id keepassxc
exec --no-startup-id intellij-idea
exec --no-startup-id firefox
exec --no-startup-id i3-sensible-terminal
